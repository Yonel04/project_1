import W from"./ImageContentful.28e07224.js";import{d as j,bN as x,bW as J,c9 as Q,r as w,e as T,g as G,h as $,aJ as K,i as O,bR as X,j as e,k as t,q as d,s as u,t as k,aF as A,v as N,x as p,l as B,n as M,bQ as I,m as Y,a3 as Z,be as ee,bT as te,_ as ne}from"./entry.a5ffe6b6.js";import{g as se}from"./Contentful.13d3140f.js";import"./EntryLink.vue.b1ce39e8.js";import"./global.de8d543b.js";function ie(n){let _,i=n[0],o=1;for(;o<n.length;){const a=n[o],r=n[o+1];if(o+=2,(a==="optionalAccess"||a==="optionalCall")&&i==null)return;a==="access"||a==="optionalAccess"?(_=i,i=r(i)):(a==="call"||a==="optionalCall")&&(i=r((...y)=>i.call(_,...y)),_=void 0)}return i}const ae={class:"today-hk-main"},le=["onClick"],oe={class:"today-hk-main__grid-container"},re={class:"today-hk-main__grid"},ce={class:"today-hk-main__title-container row-start-1 col-start-2 col-end-12 xl:col-start-4 xl:col-end-16"},de={key:0,class:"today-hk-main__title h2 xl:p2d"},ue={class:"row-start-2 col-start-4 col-end-12 xl:col-start-7 xl:col-end-14"},_e={key:0,class:"today-hk-main__description p3 xl:p3d"},me=j({__name:"TodayHkMain",props:{sections:{type:Array,required:!0}},setup(n){const _=n;x.registerPlugin(J);const{isSmall:i}=Q();let o,a,r=[];const y=w(null),H=w(null),S=w(null),g=w(null),V=T(()=>i.value?6:9),C=[[1,4],[1,4],[1,4],[1,4],[1,4,5]],E=[[2,6],[0,7],[5,6],[3,8],[2,6,8]],R=T(()=>i.value?C:E),U=T(()=>_.sections.length),z=T(()=>1/U.value);G(()=>{$.pageEnter.on(h),$.resize.on(h),h()}),K(()=>{L()}),O(()=>{$.pageEnter.off(h),$.resize.off(h)});function h(){q()}const q=()=>{L(),o=x.timeline({scrollTrigger:{trigger:S.value,start:"top bottom",end:"bottom 100%",snap:X.isMobile?0:z.value,scrub:!0,onUpdate:v=>{const m=Math.floor(v.progress/z.value-.5);m!==g.value&&(g.value=m)}}}),r.push(o),a=x.timeline({scrollTrigger:{trigger:y.value,start:"top center",end:window.innerHeight*_.sections.length,pin:!0}}),r.push(a)},L=(v=!0)=>{r.forEach(m=>{ie([m,"access",c=>c.scrollTrigger,"optionalAccess",c=>c.kill,"call",c=>c()]),m.kill()}),r=[]};function D(v){x.to(window,{duration:.6,scrollTo:{y:window.innerHeight+window.innerHeight*v},ease:"power3.out"})}return(v,m)=>{const c=W,F=te;return e(),t("div",ae,[d("ul",{class:"today-hk-main__nav",ref_key:"$nav",ref:y},[(e(!0),t(u,null,k(n.sections,(s,l)=>(e(),t("li",{key:`nav-${l}`,class:A(["today-hk-main__nav__item",{isActive:l===g.value}])},[d("button",{class:"today-hk-main__nav__btn",type:"button",onClick:f=>D(l)},null,8,le)],2))),128))],512),d("div",oe,[d("div",re,[(e(!0),t(u,null,k(V.value,s=>(e(),t("div",{key:s,class:"today-hk-main__grid__item",ref_for:!0,ref:"gridItems"},[(e(!0),t(u,null,k(R.value,(l,f)=>(e(),t(u,null,[(e(!0),t(u,null,k(l,(P,b)=>(e(),t(u,{key:`visual-${b}`},[P===s-1?(e(),t("div",{key:0,class:A(["today-hk-main__grid__item__background",{isActive:f===g.value}])},[n.sections[f]&&n.sections[f].fields.visuals[b]?(e(),N(c,{key:0,imgClassName:"today-hk-main__grid__item__image",src:n.sections[f].fields.visuals[b].fields.file.url,size:{width:480,height:300},srcMobile:n.sections[f].fields.visuals[b].fields.file.url,sizeMobile:{width:187,height:222},alt:"Ambiant image",lazy:!0},null,8,["src","srcMobile"])):p("",!0)],2)):p("",!0)],64))),128))],64))),256))]))),128))])]),d("div",{class:"today-hk-main__sections",ref_key:"$sectionsContainer",ref:S},[(e(!0),t(u,null,k(n.sections,(s,l)=>(e(),t("div",{key:`section-${l}`,class:A(["today-hk-main__section grid-m grid xl:padded",{isActive:l===g.value}]),ref_for:!0,ref_key:"$sections",ref:H},[d("div",ce,[s.fields.title?(e(),t("div",de,[B(M(I),{document:s.fields.title},null,8,["document"])])):p("",!0)]),d("div",ue,[s.fields.description?(e(),t("div",_e,[B(M(I),{document:s.fields.description},null,8,["document"])])):p("",!0),s.fields.ctaLabel&&s.fields.ctaLink?(e(),N(F,{key:1,type:"NuxtLink",to:`/${M(se)(s.fields.ctaLink)}`,theme:"azure-blue"},{default:Y(()=>[Z(ee(s.fields.ctaLabel),1)]),_:2},1032,["to"])):p("",!0)])],2))),128))],512)])}}});const pe=ne(me,[["__scopeId","data-v-3c2f3c00"]]);export{pe as default};
