import D from"./ImageContentful.28e07224.js";import{d as P,u as R,a as S,c8 as V,r as q,e as T,f as z,g as $,j as d,k as L,q as i,l as f,be as _,v as j,m as B,a3 as A,n as F,x as E,T as Q,aF as W,y,bT as G,bU as H,_ as J}from"./entry.a5ffe6b6.js";import K from"./MainPanel.8fc08879.js";import{_ as X}from"./client-only.a5fdf211.js";import{l as Y}from"./locale.83ca1a04.js";import"./ProductPanel.efccdd41.js";import"./IconButton.3d0339e3.js";import"./MainPanelTabsNav.9c9f5824.js";import"./InertiaPlugin.04320367.js";import"./MainPanelTabsNavItem.1f25b0af.js";import"./PanelCopy.ced7894a.js";import"./PanelEmbedVideo.73c24324.js";import"./PanelImage.53de468d.js";import"./PanelTeamMember.150f29ad.js";import"./PanelRelated.62669752.js";import"./card4.a5bfd41c.js";import"./Contentful.13d3140f.js";import"./EntryLink.vue.b1ce39e8.js";import"./global.de8d543b.js";import"./TeamMemberPanel.d5408c5e.js";import"./PanelPublications.7f5f7b00.js";import"./PanelPublicationsItem.c621f28c.js";import"./ActionCursor.d6a8aabd.js";import"./InterviewPanel.e178c1a5.js";import"./scroll.91b2c5c9.js";const Z={class:"team-card__visual"},ee={class:"team-card__position uppercase p5 xl:subtitle1"},te={class:"team-card__name p2 xl:h5"},b=200,ae=P({__name:"TeamCard",props:{image:{type:Object,required:!0},id:{type:String},position:{type:String},name:{type:String},teamMember:{type:Object},leadership:{type:Boolean,required:!1,default:!1},joinUs:{type:Boolean,required:!1,default:!1},grayImage:{type:Boolean,required:!1,default:!1}},emits:["panelopen","panelclose"],setup(e,{expose:N,emit:r}){const s=e,{locale:g}=R(),l=S(),h=V(),v=q(null),o=q(!1),C=T(()=>l.query.teamMember),{$contentful:w}=H();let c=null;const k=async t=>{const n=s.teamMember.fields.interview.fields.interview.map(a=>a.sys.id);try{const a=await w.getEntries({"sys.contentType.sys.id[in]":"blockIndividualCareerInterview",locale:g.value,limit:b,skip:t*b}),u=a.items.filter(p=>n.includes(p.sys.id)),m=Math.ceil(a.total/b);return{questions:u,totalPage:m}}catch{y({message:"Career interview not found",statusCode:404,fatal:!0})}},O=async()=>{if(s.joinUs){if(s.teamMember.fields.interview)try{let t=[],n=await k(0);if(t=n.questions,n.questions)for(let a=1;a<n.totalPage;a++)t=(await k(a)).questions;c={questions:t},o.value=!0,r("panelopen")}catch{y({message:"Career interview not found",statusCode:404,fatal:!0})}}else try{c={publications:await w.getEntries({"sys.contentType.sys.id[in]":"news,insight",links_to_entry:s.teamMember.sys.id,locale:g.value})},o.value=!0,r("panelopen")}catch(t){y({message:"Product not found",statusCode:404,fatal:!0}),console.error(t)}},U=T(()=>Object.assign({},s.teamMember,c));z(C,()=>{x()}),$(()=>{setTimeout(()=>{x()},0),s.joinUs&&new MutationObserver(n=>{n[0].target.classList.contains("menu--open")&&o.value&&M()}).observe(document.getElementsByClassName("menu")[0],{attributes:!0,attributeFilter:["class"]})});function x(){C.value===s.id?O():o.value=!1}function I(){h.replace({path:l.fullPath,query:{teamMember:s.id}})}function M(){h.replace({path:l.fullPath,query:""}),r("panelclose")}return N({$el:v}),(t,n)=>{const a=D,u=G,m=K,p=X;return d(),L("li",{class:W(["team-card",{"is-leadership":e.leadership,"gray-image":e.grayImage}]),ref_key:"$el",ref:v},[i("div",Z,[f(a,{imgClassName:"team-card__visual__image",src:e.image.fields.file.url,size:{width:400,height:400},srcMobile:e.image.fields.file.url,sizeMobile:{width:300,height:300},alt:e.image.fields.description,lazy:!0},null,8,["src","srcMobile","alt"])]),i("p",ee,_(e.position),1),i("h3",te,_(e.name),1),e.leadership?(d(),j(u,{key:0,class:"team-card__primary-button",onClick:I,theme:"pink-blue"},{default:B(()=>[A(_(F(Y).data.readBio),1)]),_:1})):E("",!0),i("button",{class:"team-card__btn",type:"button",onClick:I}),f(p,null,{default:B(()=>[o.value?(d(),j(Q,{key:0,to:".app-panels"},[f(m,{isOpen:o.value,type:e.joinUs?"interview":"teamMember",data:U.value,onCloseCallback:M,joinUs:e.joinUs},null,8,["isOpen","type","data","joinUs"])])):E("",!0)]),_:1})],2)}}});const Te=J(ae,[["__scopeId","data-v-190a6bb6"]]);export{Te as default};
