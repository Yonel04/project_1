import P from"./LineByLine.6c421f8e.js";import{d as T,u as M,w as E,b as $,y as j,g as H,e as V,r as B,j as b,k as w,q as s,l as c,m as f,a3 as d,be as a,n as _,bQ as D,x as G,c0 as I,bT as R,c1 as U,_ as q}from"./entry.a5ffe6b6.js";import A from"./ActionCursor.d6a8aabd.js";import{l as x}from"./locale.83ca1a04.js";import{u as g,s as Q,a as z}from"./user.2945adb1.js";import{f as F}from"./CountryGPS.a443a576.js";import{r as J}from"./rich-text-plain-text-renderer.es5.996a2dcf.js";import"./SplitText.a8cce3cb.js";import"./Delay.0741e482.js";import"./global.de8d543b.js";const K={class:"offices-hero__wrapper"},W={class:"offices-hero grid-m grid xl:padded"},X={class:"offices-hero__title xl:row-start-1 xl:col-start-2 xl:col-end-12 row-start-1 col-start-2 col-end-11"},Y={class:"offices-hero__description xl:row-start-2 xl:col-start-2 xl:col-end-9 row-start-2 col-start-2 col-end-11 xl:h4 p1"},Z={key:0,class:"offices-hero__selected xl:row-start-3 xl:col-start-10 xl:col-end-16 row-start-3 col-start-2 col-end-11"},ee={class:"offices-hero__selected__label xl:h5 p5 uppercase text-center"},te={class:"offices-hero__selected__main"},oe={class:"offices-hero__selected__title xl:p2d h3"},se={class:"offices-hero__selected__address xl:p3 p5"},ce={class:"offices-hero__selected__contact xl:p3 p5"},ae=T({__name:"OfficesHero",props:{subtitle:{type:String},title:{type:String},description:{type:Object}},async setup(p){let u,y;const{locale:v}=M(),{data:O}=([u,y]=E(async()=>$("officesHero",async t=>{try{const n=await t.getEntries({content_type:"city",locale:v.value}),o=[];for(let l=0,h=n.items.length;l<h;l++){const e=n.items[l];if(e.fields.id!=="h-and-k-global"){const r=await t.getEntries({"sys.contentType.sys.id[in]":"singleSingleLocationOfficePage,singleMultipleLocationOfficePage",links_to_entry:e.sys.id,locale:v.value});o.push({id:e.fields.id,name:e.fields.name,airport:e.fields.airport,address:e.fields.address,location:e.fields.location?e.fields.location:null,phoneNumber:e.fields.phoneNumber,countryCode:r.items[0]?r.items[0].fields.countryCode:null,region:e.fields.region.fields,website:e.fields.website,office:r.items[0]?r.items[0].fields.id:null})}}return{cities:o}}catch{j({message:"Offices not found",statusCode:404,fatal:!0})}})),u=await u,y(),u);H(()=>{i.value||C()});const i=V(()=>g.location.closestOffice&&Object.values(g.location.closestOffice).length>0?g.location.closestOffice:!1),C=()=>{if(!navigator.geolocation){console.error("Geolocation is not supported by this browser.");return}navigator.geolocation&&navigator.geolocation.getCurrentPosition(k,N)},k=t=>{const n=t.coords.latitude,o=t.coords.longitude;Q(n,o);const l=F(n,o,O.value.cities);z(l)},N=t=>{console.error("Geolocation error",t)},m=B(!1);function S(){m.value=!0}function L(){m.value=!1}return(t,n)=>{const o=P,l=I,h=R,e=U,r=A;return b(),w("div",K,[s("div",W,[s("div",X,[c(o,{tag:"p",delay:.35,class:"offices-hero__subtitle xl:p3 p4 uppercase"},{default:f(()=>[d(a(p.subtitle),1)]),_:1}),c(o,{tag:"h1",delay:.5,class:"h1 xl:h1d"},{default:f(()=>[d(a(p.title),1)]),_:1})]),s("div",Y,[c(o,{delay:.75},{default:f(()=>[d(a(_(J.documentToPlainTextString)(p.description)),1)]),_:1})]),i.value?(b(),w("div",Z,[s("div",ee,a(_(x).data.officeNearby||"Close to you"),1),s("div",te,[s("p",oe,a(i.value.name),1),s("address",se,[c(_(D),{document:i.value.address},null,8,["document"])]),s("address",ce,a(i.value.phoneNumber),1),c(l,{class:"offices-hero__selected__link",onMouseenter:S,onMouseleave:L,to:t.localePath(`/office/${i.value.office}`)},null,8,["to"]),c(h,{to:t.localePath(`/office/${i.value.office}`),type:"NuxtLink",class:"offices-hero__mobile-cta"},{default:f(()=>[d(a(_(x).data.office),1)]),_:1},8,["to"])]),c(r,{class:"offices-hero__desktop-cta",show:m.value,theme:"white"},{default:f(()=>[d(a(_(x).data.detailsCta)+" ",1),c(e,{name:"arrow"})]),_:1},8,["show"])])):G("",!0)])])}}});const he=q(ae,[["__scopeId","data-v-0a457c9c"]]);export{he as default};
