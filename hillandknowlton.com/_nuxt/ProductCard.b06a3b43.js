import j from"./MainPanel.8fc08879.js";import{_ as A}from"./client-only.a5fdf211.js";import{d as U,bp as Z,bN as s,u as J,a as Q,c8 as W,r as t,e as p,bR as a,g as x,aJ as K,f as X,j as d,k as C,n as Y,q as r,x as P,be as T,l as H,m as ee,v as N,T as te,aF as oe,y as se,bU as ae,_ as re}from"./entry.a5ffe6b6.js";import{D as ne}from"./DrawSVGPlugin.1b609e71.js";import{s as D}from"./global.de8d543b.js";import"./ProductPanel.efccdd41.js";import"./IconButton.3d0339e3.js";import"./MainPanelTabsNav.9c9f5824.js";import"./InertiaPlugin.04320367.js";import"./MainPanelTabsNavItem.1f25b0af.js";import"./PanelCopy.ced7894a.js";import"./PanelEmbedVideo.73c24324.js";import"./PanelImage.53de468d.js";import"./ImageContentful.28e07224.js";import"./PanelTeamMember.150f29ad.js";import"./PanelRelated.62669752.js";import"./card4.a5bfd41c.js";import"./locale.83ca1a04.js";import"./Contentful.13d3140f.js";import"./EntryLink.vue.b1ce39e8.js";import"./TeamMemberPanel.d5408c5e.js";import"./PanelPublications.7f5f7b00.js";import"./PanelPublicationsItem.c621f28c.js";import"./ActionCursor.d6a8aabd.js";import"./InterviewPanel.e178c1a5.js";import"./scroll.91b2c5c9.js";const le={key:0,class:"svg-border",viewBox:"0 0 394 480",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ue={class:"product-card__description p2 xl:h5"},ie=30,ce=32,pe=20,de=U({__name:"ProductCard",props:{id:{type:String,required:!0},title:{type:String,required:!0},description:{type:String,required:!1},theme:{type:String,required:!1,default:"blue"},product:{type:Object,require:!0},titleNbLine:{type:Number,required:!1,default:1}},emits:["updateTitleNbLine"],setup(n,{expose:O,emit:q}){const o=n;Z(e=>({"78304cfa":$.value})),s.registerPlugin(ne);const{locale:V}=J(),m=Q(),f=W(),v=t(null),_=t(null),y=t(null),l=t(null),u=t(!1),h=t(1),i=t(null),I=()=>{i.value=new ResizeObserver(L),i.value.observe(_.value)},$=p(()=>`${(o.titleNbLine-h.value)*b.value+ie}px`),b=p(()=>a.isDesktop?ce:pe),L=()=>{const e=Math.floor(_.value.offsetHeight/b.value);h.value=e,q("updateTitleNbLine",e),a.isDesktop&&s.set(l.value,{drawSVG:"0%"})};x(()=>{a.isDesktop&&s.set(l.value,{drawSVG:"0%"}),I()}),K(()=>{i.value&&i.value.disconnect()});const g=e=>{a.isMobile||(s.to(l.value,{duration:.5,drawSVG:e?"100%":"0%",ease:"power2.out"}),s.fromTo(y.value,{drawSVG:e?"0% 100%":"100% 100%"},{duration:.5,drawSVG:e?"100% 100%":"0% 100%",ease:"power2.out"}))},w=p(()=>m.query.product),{$contentful:M}=ae();let k=null;const B=async()=>{try{k={relatedContent:await M.getEntries({"sys.contentType.sys.id[in]":"news,caseStudy,insight",links_to_entry:o.product.sys.id,locale:V.value})},u.value=!0}catch(e){se({message:"Product not found",statusCode:404,fatal:!0}),console.error(e)}},E=p(()=>Object.assign({},o.product,k));X(w,()=>{S()}),x(()=>{setTimeout(()=>{S()},0)});function S(){w.value===o.id?B():u.value=!1}function G(){D(!0),f.replace({path:m.fullPath,query:{product:o.id}})}function R(){D(!1),f.replace({path:m.fullPath,query:""})}return O({$el:v}),(e,c)=>{const z=j,F=A;return d(),C("div",{class:oe(["product-card",["product-card--"+n.theme]]),ref_key:"$el",ref:v,onMouseenter:c[0]||(c[0]=()=>g(!0)),onMouseleave:c[1]||(c[1]=()=>g(!1))},[Y(a).isDesktop?(d(),C("svg",le,[r("path",{ref_key:"$regularPath",ref:y,d:"M16 0.5h362s15.5 0 15.5 15.5v448s0 15.5 -15.5 15.5h-362s-15.5 0 -15.5 -15.5v-448s0 -15.5 15.5 -15.5"},null,512),r("path",{ref_key:"$animatedPath",ref:l,class:"animated",d:"M16 0.5h362s15.5 0 15.5 15.5v448s0 15.5 -15.5 15.5h-362s-15.5 0 -15.5 -15.5v-448s0 -15.5 15.5 -15.5"},null,512)])):P("",!0),r("h3",{ref_key:"$title",ref:_,class:"product-card__title h3Italic xl:h3Italicd"},T(n.title),513),r("p",ue,T(n.description),1),r("button",{class:"product-card__btn",type:"button",onClick:G}),H(F,null,{default:ee(()=>[(d(),N(te,{to:".app-panels"},[u.value?(d(),N(z,{key:0,isOpen:u.value,type:"product",data:E.value,onCloseCallback:R},null,8,["isOpen","data"])):P("",!0)]))]),_:1})],34)}}});const Ge=re(de,[["__scopeId","data-v-90b62277"]]);export{Ge as default};
