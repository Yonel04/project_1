import P from"./OfficesHero.fa0668c5.js";import E from"./OfficesSearch.c89b0b85.js";import{d as R,u as F,r as b,w,P as g,F as T,A as B,g as H,p as y,h as D,i as O,bR as L,a as N,b as I,c as K,j as M,k as S,l as k,n as m,q as V,y as j,_ as q}from"./entry.a5ffe6b6.js";import{u as G}from"./useGlobalContent.a179bc4d.js";import{u as U}from"./usePageTheme.46e6342d.js";import"./LineByLine.6c421f8e.js";import"./SplitText.a8cce3cb.js";import"./Delay.0741e482.js";import"./global.de8d543b.js";import"./ActionCursor.d6a8aabd.js";import"./locale.83ca1a04.js";import"./user.2945adb1.js";import"./CountryGPS.a443a576.js";import"./rich-text-plain-text-renderer.es5.996a2dcf.js";import"./OfficesSearchForm.f8b4797b.js";import"./offices.631e8b3c.js";import"./OfficesCategoryButton.d67c3d29.js";import"./OfficeListItem.78648c69.js";import"./Device.430fdbcd.js";function h(p){let i,t=p[0],n=1;for(;n<p.length;){const s=p[n],a=p[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&t==null)return;s==="access"||s==="optionalAccess"?(i=t,t=a(t)):(s==="call"||s==="optionalCall")&&(t=a((...f)=>t.call(i,...f)),i=void 0)}return t}const z={class:"offices"},J=R({__name:"offices",async setup(p){let i,t;const{locale:n}=F(),s=b(),a=b();[i,t]=w(()=>G()),await i,t(),U({theme:g.DarkBlue,footer:T.Office,footerTheme:B.Dark}),H(()=>{y.inTransition?D.pageEnterCompleted.on(f):f()}),O(()=>{a.value&&a.value.disconnect(),D.pageEnterCompleted.off(f)});const f=()=>{L.isDesktop&&x()},x=()=>{a.value=new IntersectionObserver(c=>{y.theme=c[0].intersectionRatio>0?g.Light:g.Dark},{threshold:0,rootMargin:"0px 0px -85% 0px"}),s.value&&a.value.observe(s.value)};N();const{data:o}=([i,t]=w(async()=>I("all_offices",async c=>{try{const[d,_]=await Promise.all([c.getEntries({content_type:"offices",locale:n.value}),c.getEntries({content_type:"city",locale:n.value})]),r=h([d,"access",e=>e.items,"access",e=>e[0],"optionalAccess",e=>e.fields]),C=_.items.filter(e=>e.fields.id!=="h-and-k-global").map(e=>c.getEntries({"sys.contentType.sys.id[in]":"singleSingleLocationOfficePage,singleMultipleLocationOfficePage",links_to_entry:e.sys.id,locale:n.value}).then(u=>({id:e.fields.id,name:e.fields.name,airport:e.fields.airport,address:e.fields.address,phoneNumber:e.fields.phoneNumber,region:e.fields.region.fields,location:h([e,"access",l=>l.fields,"optionalAccess",l=>l.location]),website:h([e,"access",l=>l.fields,"optionalAccess",l=>l.website]),office:u.items[0]?u.items[0].fields.id:null}))),v=await Promise.all(C),A=r.regionFilters.map(e=>({...e.fields,count:v.filter(u=>u.region.id===e.fields.id).length}));return{subtitle:r.subtitle,title:r.title,description:r.description,metaDescription:r.metaDescription,regionFilters:A,cities:v}}catch{j({message:"Offices not found",statusCode:404,fatal:!0})}})),i=await i,t(),i);return K({title:o.value.title+" - Hill & Knowlton",meta:[{name:"description",content:o.value.metaDescription||""},,{property:"og:title",content:o.value.title+" - Hill & Knowlton"||""},{property:"og:description",content:o.value.metaDescription||""},{name:"twitter:title",content:o.value.title+" - Hill & Knowlton"||""},{name:"twitter:description",content:o.value.metaDescription||""}]}),(c,d)=>{const _=P,r=E;return M(),S("main",z,[k(_,{subtitle:m(o).subtitle,title:m(o).title,description:m(o).description},null,8,["subtitle","title","description"]),V("div",{ref_key:"root",ref:s},[k(r,{cities:m(o).cities,citiesRegions:m(o).regionFilters},null,8,["cities","citiesRegions"])],512)])}}});const ue=q(J,[["__scopeId","data-v-9bb59933"]]);export{ue as default};
