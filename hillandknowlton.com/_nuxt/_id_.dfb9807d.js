import N from"./ServiceSectorHero.065ea793.js";import K from"./TeamSection.aaf942fc.js";import U from"./TitleParagraph.546f3d2a.js";import Y from"./ListWithDescription.211d7670.js";import W from"./DoubleColumnList.a4966ded.js";import j from"./QuoteWithImage.d1a16889.js";import z from"./RelatedItems.b64336ca.js";import{_ as G}from"./StickyLayer.vue.d25c71c2.js";import{d as Q,u as Z,w as $,r as g,P as E,F as J,A as X,g as ee,i as te,h as A,bY as oe,a as ie,b as se,c as ne,o as le,p as x,j as a,k as w,q as P,l as k,n,s as R,t as V,v,x as y,m as ae,bZ as f,bR as re,y as ce,aV as me,aS as de,_ as pe}from"./entry.a5ffe6b6.js";import{u as ue}from"./useGlobalContent.a179bc4d.js";import{l as fe,g as _e}from"./locale.83ca1a04.js";import{u as he}from"./usePageTheme.46e6342d.js";import"./backBtn.6ed90b16.js";import"./ImageContentful.28e07224.js";import"./ScrollContinue.c68de9f2.js";import"./client-only.a5fdf211.js";import"./Contentful.13d3140f.js";import"./EntryLink.vue.b1ce39e8.js";import"./global.de8d543b.js";import"./SecondaryIconButton.f501442f.js";import"./InertiaPlugin.04320367.js";import"./TeamCard.e7dc115a.js";import"./MainPanel.8fc08879.js";import"./ProductPanel.efccdd41.js";import"./IconButton.3d0339e3.js";import"./MainPanelTabsNav.9c9f5824.js";import"./MainPanelTabsNavItem.1f25b0af.js";import"./PanelCopy.ced7894a.js";import"./PanelEmbedVideo.73c24324.js";import"./PanelImage.53de468d.js";import"./PanelTeamMember.150f29ad.js";import"./PanelRelated.62669752.js";import"./card4.a5bfd41c.js";import"./TeamMemberPanel.d5408c5e.js";import"./PanelPublications.7f5f7b00.js";import"./PanelPublicationsItem.c621f28c.js";import"./ActionCursor.d6a8aabd.js";import"./InterviewPanel.e178c1a5.js";import"./scroll.91b2c5c9.js";import"./ListWithDescriptionItem.e1d1d034.js";import"./DoubleColumnListItem.640cb28e.js";import"./rich-text-plain-text-renderer.es5.996a2dcf.js";function q(p){let c,l=p[0],_=1;for(;_<p.length;){const m=p[_],h=p[_+1];if(_+=2,(m==="optionalAccess"||m==="optionalCall")&&l==null)return;m==="access"||m==="optionalAccess"?(c=l,l=h(l)):(m==="call"||m==="optionalCall")&&(l=h((...C)=>l.call(c,...C)),c=void 0)}return l}const ve=p=>(me("data-v-ee1d224d"),p=p(),de(),p),ye={class:"sector"},ge={class:"sector__intro"},we=["id"],be=["id"],De=ve(()=>P("div",{class:"footer-intersection"},null,-1)),Se=Q({__name:"[id]",async setup(p){let c,l;const{locale:_}=Z();[c,l]=$(()=>ue()),await c,l();const m=g(),h=g(new Set);function C(r){h.value.add(r)}const b=g(),M=g(),D=g(),S=()=>{t.value.sections&&t.value.sections.forEach(e=>{e.fields.blocks.forEach(i=>{const{id:d}=i.sys,{title:s}=i.fields;f.sections.push({id:d,title:s})})}),f.label=_e("Sector"),f.title=t.value.title,b.value=new IntersectionObserver(e=>{window.scrollY!==0&&(e[0].intersectionRatio>0?(x.theme=E.Light,f.showSub=!0,console.log("header show sub")):(x.theme=E.Dark,f.showSub=!1,console.log("header hide sub")))},{threshold:0,rootMargin:"0px 0px -85% 0px"});const r=document.querySelector(".footer-intersection");M.value=new IntersectionObserver(e=>{window.scrollY!==0&&(re.isDesktop||(e[0].intersectionRatio>0?(f.showSub=!1,console.log("footer hide sub")):(f.showSub=!0,console.log("footer show sub"))))}),D.value=new IntersectionObserver(e=>{for(let i=0,d=e.length;i<d;i++)if(e[i].isIntersecting){h.value.forEach(s=>{s.id===e[i].target.id&&(f.activeSection=s.id)});break}},{threshold:0,rootMargin:"0px 0px -85% 0px"}),m.value&&b.value.observe(m.value),r&&M.value.observe(r),h.value.size>0&&h.value.forEach(e=>D.value.observe(e))},B=()=>{x.inTransition?A.pageEnterCompleted.on(S):S()};he({theme:E.Dark,footer:J.Case,footerTheme:X.Purple}),ee(()=>{B()}),te(()=>{b.value&&b.value.disconnect(),D.value&&D.value.disconnect(),A.pageEnterCompleted.off(S),A.introCompleted.off(S),oe()});const T=ie(),{data:t}=([c,l]=$(async()=>se(`sector_${T.params.id}`,async r=>{try{let e=await r.getEntries({content_type:"sector","fields.id[in]":T.params.id,include:4,locale:_.value}),i=[];try{const d=await r.getEntries({"sys.contentType.sys.id[in]":"news,caseStudy,insight",links_to_entry:e.items[0].sys.id,locale:_.value,limit:10});if(q([d,"optionalAccess",s=>s.items,"access",s=>s.length])){const s=d.items.filter(I=>I.fields.id!==T.params.id);s.length&&(i=s)}}catch(d){console.log("Problem fetching related data 8",d)}return{id:e.items[0].fields.id,title:e.items[0].fields.title,thumbnail:e.items[0].fields.thumbnail,video:e.items[0].fields.video,labelDescription:e.items[0].fields.label,mainDescription:e.items[0].fields.mainDescription,metaDescription:e.items[0].fields.metaDescription,secondaryDescription:e.items[0].fields.secondaryDescription,sections:e.items[0].fields.sections,footerTitle:e.items[0].fields.footerTitle,associatedSectors:e.items[0].fields.associatedSectors,relatedCases:e.items[0].fields.relatedCaseStudies,relatedItems:i}}catch{ce({message:"sector not found",statusCode:404,fatal:!0})}})),c=await c,l(),c);return ne({title:t.value.title+" - Hill & Knowlton"||"",meta:[{name:"description",content:t.value.metaDescription||""},{property:"og:image",content:t.value.thumbnail?`https:${t.value.thumbnail.fields.file.url}?w=1200&h=630`:`${{}.VUE_APP_DOMAIN}/meta.png`},{name:"twitter:image",content:t.value.thumbnail?`https:${t.value.thumbnail.fields.file.url}?w=1200&h=630`:`${{}.VUE_APP_DOMAIN}/meta.png`},{property:"og:title",content:t.value.title+" - Hill & Knowlton"||""},{property:"og:description",content:t.value.metaDescription||""},{name:"twitter:title",content:t.value.title+" - Hill & Knowlton"||""},{name:"twitter:description",content:t.value.metaDescription||""}]}),le(()=>{let r=null,e=null;t.value.footerTitle&&(r=t.value.footerTitle),t.value.associatedSectors&&(e=t.value.associatedSectors.map(i=>({type:"sector",id:i.fields.id,title:i.fields.title}))),x.footerData={title:r,items:e}}),(r,e)=>{const i=N,d=K,s=U,I=Y,H=W,F=j,O=z,L=G;return a(),w("main",ye,[P("div",ge,[k(i,{label:"sector",title:n(t).title,image:n(t).thumbnail,video:n(t).video,labelDescription:n(t).labelDescription,mainDescription:n(t).mainDescription,secondaryDescription:n(t).secondaryDescription,theme:"purple"},null,8,["title","image","video","labelDescription","mainDescription","secondaryDescription"])]),P("div",{class:"sector__sections",ref_key:"root",ref:m},[(a(!0),w(R,null,V(n(t).sections,u=>(a(),w("div",{class:"sector__section",id:u.fields.sectionTitle,key:u.sys.id},[(a(!0),w(R,null,V(u.fields.blocks,o=>(a(),w("div",{key:o.sys.id,id:o.sys.id,ref_for:!0,ref:C},[o.sys.contentType.sys.id==="blockTeamSection"?(a(),v(d,{key:0,title:o.fields.title,teamMembers:o.fields.teamMembers},null,8,["title","teamMembers"])):y("",!0),o.sys.contentType.sys.id==="blockTitleParagraph"?(a(),v(s,{key:1,title:o.fields.title,content:o.fields.content,cta:o.fields.cta,theme:"purple"},null,8,["title","content","cta"])):y("",!0),o.sys.contentType.sys.id==="blockListWithDescription"?(a(),v(I,{key:2,title:o.fields.title,items:o.fields.items},null,8,["title","items"])):y("",!0),o.sys.contentType.sys.id==="blockDoubleColumnList"?(a(),v(H,{key:3,title:o.fields.title,items:o.fields.items},null,8,["title","items"])):y("",!0),o.sys.contentType.sys.id==="blockQuoteWithImage"?(a(),v(F,{key:4,image:o.fields.image,quote:o.fields.quote,author:o.fields.name,position:o.fields.position},null,8,["image","quote","author","position"])):y("",!0)],8,be))),128))],8,we))),128)),q([n,"call",u=>u(t),"access",u=>u.relatedCases,"optionalAccess",u=>u.length])?(a(),v(O,{key:0,items:n(t).relatedCases,title:"localeStore.data.globalHighlightedCaseStudies","default-display-count":3},null,8,["items","title"])):y("",!0),k(L,{start:"bottom +=75%",class:"sector__section"},{default:ae(()=>[n(t).relatedItems.length?(a(),v(O,{key:0,items:n(t).relatedItems,title:`${n(fe).data.globalRelatedTo} ${n(t).title}`},null,8,["items","title"])):y("",!0)]),_:1})],512),De])}}});const pt=pe(Se,[["__scopeId","data-v-ee1d224d"]]);export{pt as default};
