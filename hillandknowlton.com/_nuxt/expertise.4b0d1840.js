import G from"./ExpertiseHero.2d04edd1.js";import J from"./ExpertiseTabsNav.5bcef386.js";import W from"./ExpandableList.899ea647.js";import Q from"./Embedded.25da71f5.js";import X from"./ExpertiseProductsTab.0c01dc50.js";import Y from"./RelatedItems.b64336ca.js";import{d as Z,w as F,bO as ee,u as te,r as v,b as se,c as ie,e as I,f as H,o as oe,P,F as ae,A as re,g as le,p as L,h as $,aJ as ne,bN as ce,j as m,k as E,l as K,n as x,q as M,s as ue,t as pe,aF as de,v as g,x as T,y as me,bU as fe,_ as _e}from"./entry.a5ffe6b6.js";import{s as w,e as ve}from"./ExpertiseTabNavItem.1b569be2.js";import{l as O}from"./locale.83ca1a04.js";import{u as ye}from"./useGlobalContent.a179bc4d.js";import{u as be}from"./usePageTheme.46e6342d.js";import"./LineByLine.6c421f8e.js";import"./SplitText.a8cce3cb.js";import"./Delay.0741e482.js";import"./global.de8d543b.js";import"./InertiaPlugin.04320367.js";import"./ExpandableListItem.9e01eaa7.js";import"./ExpandableIcon.87eebd47.js";import"./Contentful.13d3140f.js";import"./EntryLink.vue.b1ce39e8.js";import"./ImageContentful.28e07224.js";import"./ProductCard.b06a3b43.js";import"./MainPanel.8fc08879.js";import"./ProductPanel.efccdd41.js";import"./IconButton.3d0339e3.js";import"./MainPanelTabsNav.9c9f5824.js";import"./MainPanelTabsNavItem.1f25b0af.js";import"./PanelCopy.ced7894a.js";import"./PanelEmbedVideo.73c24324.js";import"./PanelImage.53de468d.js";import"./PanelTeamMember.150f29ad.js";import"./PanelRelated.62669752.js";import"./card4.a5bfd41c.js";import"./TeamMemberPanel.d5408c5e.js";import"./PanelPublications.7f5f7b00.js";import"./PanelPublicationsItem.c621f28c.js";import"./ActionCursor.d6a8aabd.js";import"./InterviewPanel.e178c1a5.js";import"./scroll.91b2c5c9.js";import"./client-only.a5fdf211.js";import"./DrawSVGPlugin.1b609e71.js";function f(y){let c,r=y[0],l=1;for(;l<y.length;){const u=y[l],_=y[l+1];if(l+=2,(u==="optionalAccess"||u==="optionalCall")&&r==null)return;u==="access"||u==="optionalAccess"?(c=r,r=_(r)):(u==="call"||u==="optionalCall")&&(r=_((...b)=>r.call(c,...b)),c=void 0)}return r}const he={class:"expertise"},xe={class:"expertise__tabs"},ge=Z({__name:"expertise",async setup(y){let c,r;[c,r]=F(()=>ye()),await c,r();const l=ee(),{locale:u}=te(),_=v(),b=v(),A=()=>{b.value=new IntersectionObserver(e=>{L.theme=e[0].intersectionRatio>0?P.Light:P.Dark},{threshold:0,rootMargin:"0px 0px -85% 0px"}),_.value&&b.value.observe(_.value)},{data:s}=([c,r]=F(async()=>se("expertise",async e=>{try{const i=await e.getEntries({content_type:"mainExpertise",include:6,locale:u.value});return{title:i.items[0].fields.title,metaDescription:i.items[0].fields.metaDescription,subtitle:i.items[0].fields.subtitle,description:i.items[0].fields.description,servicesTab:i.items[0].fields.servicesSection,sectorsTab:i.items[0].fields.sectorsSection,productsTab:i.items[0].fields.productsSection,pageData:i}}catch{me({message:"Expertise not found",statusCode:404,fatal:!0})}})),c=await c,r(),c);ie({title:s.value.title+" - Hill & Knowlton"||"",meta:[{name:"description",content:s.value.metaDescription||""},{property:"og:title",content:s.value.title+" - Hill & Knowlton"||""},{property:"og:description",content:s.value.metaDescription||""},{name:"twitter:title",content:s.value.title+" - Hill & Knowlton"||""},{name:"twitter:description",content:s.value.metaDescription||""}]});const R=v(s.value.pageData),{$contentful:B}=fe(),C=v([]),S=v([]),U=async()=>{const e=f([R,"access",t=>t.value,"access",t=>t.items,"access",t=>t[0],"optionalAccess",t=>t.fields,"access",t=>t.servicesSection]),i=f([R,"access",t=>t.value,"access",t=>t.items,"access",t=>t[0],"optionalAccess",t=>t.fields,"access",t=>t.sectorsSection]);if(e){const t=e.fields.list.fields.items.map(async o=>{try{const n=await B.getEntries({"sys.contentType.sys.id[in]":"news,caseStudy,insight",links_to_entry:o.fields.service.sys.id,locale:u.value,limit:10});return f([n,"optionalAccess",d=>d.items,"access",d=>d.length])?n.items:[]}catch(n){return console.log("Problem fetching related data for services",n),[]}});try{const o=await Promise.all(t);C.value=o.flat()}catch(o){console.log("Problem processing service related data",o)}}if(i){const t=i.fields.sectors.map(async o=>{try{const n=await B.getEntries({"sys.contentType.sys.id[in]":"news,caseStudy,insight",links_to_entry:o.sys.id,locale:u.value,limit:10});return f([n,"optionalAccess",d=>d.items,"access",d=>d.length])?n.items:[]}catch(n){return console.log("Problem fetching related data for sectors",n),[]}});try{const o=await Promise.all(t);S.value=o.flat()}catch(o){console.log("Problem processing sector related data",o)}}};let p=null;const D=I(()=>{const e=[];return s.value.servicesTab&&e.push({label:s.value.servicesTab.fields.title}),s.value.sectorsTab&&e.push({label:s.value.sectorsTab.fields.title}),s.value.productsTab&&e.push({label:s.value.productsTab.fields.title}),e}),V=I(()=>{const e=[];return s.value.servicesTab&&e.push({id:"services",data:s.value.servicesTab}),s.value.sectorsTab&&e.push({id:"sectors",data:s.value.sectorsTab}),s.value.productsTab&&e.push({id:"products",data:s.value.productsTab}),e}),h=v(null),k=I(()=>ve.currentTab);H(k,(e,i)=>{q(i,e)}),H(l,(e,i)=>{f([l,"access",t=>t.query,"optionalAccess",t=>t.category])&&w(D.value.findIndex(t=>t.label.toLowerCase()===l.query.category))}),oe(()=>{f([l,"access",e=>e.query,"optionalAccess",e=>e.category])?w(D.value.findIndex(e=>e.label.toLowerCase()===l.query.category)):f([l,"access",e=>e.query,"optionalAccess",e=>e.product])?w(2):w(0)}),be({theme:P.Dark,footer:ae.Internal,footerTheme:re.Dark}),le(()=>{U(),q(null,k.value),L.inTransition?$.pageEnterCompleted.on(A):A()}),ne(()=>{f([b,"access",e=>e.value,"optionalAccess",e=>e.disconnect,"call",e=>e()]),$.pageEnterCompleted.off(A)});function q(e,i){if(p&&p.kill(),h.value){p=ce.timeline();const t=e===null?null:h.value[e],o=h.value[i];t!==null?(p.to(t,{duration:.15,autoAlpha:0,ease:"linear"},0),p.to(o,{duration:.15,autoAlpha:1,ease:"linear"},.15),p.to(t,{duration:0,display:"none",ease:"linear"},.15),p.to(o,{duration:0,display:"block",ease:"linear"},.15)):(p.set(h.value,{display:"none"},0),p.set(o,{autoAlpha:1,display:"block"},0))}}return(e,i)=>{const t=G,o=J,n=W,d=Q,j=X,N=Y;return m(),E("main",he,[K(t,{title:x(s).title,subtitle:x(s).subtitle,description:x(s).description},null,8,["title","subtitle","description"]),M("div",{ref_key:"root",ref:_},[K(o,{items:D.value},null,8,["items"]),M("div",xe,[(m(!0),E(ue,null,pe(V.value,(a,z)=>(m(),E("div",{key:a.id,class:de(["expertise__tab",{isActive:z===k.value}]),ref_for:!0,ref_key:"$tabItems",ref:h},[a.id==="services"&&k.value===0?(m(),g(n,{key:0,title:a.data.fields.list.fields.title,description:a.data.fields.list.fields.description,items:a.data.fields.list.fields.items},null,8,["title","description","items"])):T("",!0),a.id==="sectors"?(m(),g(d,{key:1,items:a.data.fields.sectors,theme:"dark-blue","show-title":!1},null,8,["items"])):T("",!0),a.id==="products"?(m(),g(j,{key:2,products:a.data.fields.products,expertises:a.data.fields.expertises,productsTitle:a.data.fields.productsTitle,expertisesTitle:a.data.fields.expertisesTitle},null,8,["products","expertises","productsTitle","expertisesTitle"])):T("",!0),a.id==="services"&&C.value.length?(m(),g(N,{key:3,items:C.value,title:x(O).data.expertiseRelatedServices,theme:"dark-blue"},null,8,["items","title"])):T("",!0),a.id==="sectors"&&S.value.length?(m(),g(N,{key:4,items:S.value,title:x(O).data.expertiseRelatedSectors,theme:"dark-blue"},null,8,["items","title"])):T("",!0)],2))),128))])],512)])}}});const ct=_e(ge,[["__scopeId","data-v-6d3bd570"]]);export{ct as default};
